dtal@thing5: ./scripts/reamplify_landing.sh 
/home/dtal/BACKUPS/www.tracktunes.org/amplify/2023-02-03
spawn amplify delete
? Are you sure you want to continue? This CANNOT be undone. (This will delete all the environments of the project from the cloud and wipe out all
 the local files created by Amplify CLI) Yes
🛑 No Amplify backend project files detected within this folder.

Resolution: 
Either initialize a new Amplify project or pull an existing project.
- "amplify init" to initialize a new Amplify project
- "amplify pull <app-id>" to pull your existing Amplify project. Find the <app-id> in the AWS Console or Amplify Studio.

Learn more at: https://docs.amplify.aws/cli/project/troubleshooting/

Session Identifier: e8e5cbbc-833e-420d-b43b-c817309f0dd6
Hit enter whenever you are ready to continue!

spawn amplify init
Note: It is recommended to run this command from the root of your app directory
? Enter a name for the project landing
The following configuration will be applied:

Project information
| Name: landing
| Environment: dev
| Default editor: Visual Studio Code
| App type: javascript
| Javascript framework: angular
| Source Directory Path: src
| Distribution Directory Path: dist
| Build Command: npm run-script build
| Start Command: ng serve

? Initialize the project with the above configuration? Yes
Using default provider  awscloudformation
? Select the authentication method you want to use: AWS profile

For more information on AWS Profiles, see:
https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-profiles.html

? Please choose the profile you want to use default
Adding backend environment dev to AWS Amplify app: d3lrb802rer84a

Deployment completed.
Deploying root stack landing [ ====================-------------------- ] 2/4
	amplify-landing-dev-224751     AWS::CloudFormation::Stack     CREATE_IN_PROGRESS             Fri Feb 03 2023 22:47:52…     
	UnauthRole                     AWS::IAM::Role                 CREATE_COMPLETE                Fri Feb 03 2023 22:48:10…     
	AuthRole                       AWS::IAM::Role                 CREATE_COMPLETE                Fri Feb 03 2023 22:48:10…     
	DeploymentBucket               AWS::S3::Bucket                CREATE_IN_PROGRESS             Fri Feb 03 2023 22:47:56…     

✔ Help improve Amplify CLI by sharing non sensitive configurations on failures (y/N) · no
Deployment state saved successfully.
✔ Initialized provider successfully.
✅ Initialized your environment successfully.

Your project has been successfully initialized and connected to the cloud!

Some next steps:
"amplify status" will show you what you've added already and if it's locally configured or deployed
"amplify add <category>" will allow you to add features like user login or a backend API
"amplify push" will build all your local backend resources and provision it in the cloud
"amplify console" to open the Amplify Console and view your project status
"amplify publish" will build all your local backend and frontend resources (if you have hosting category added) and provision it in the cloud

Pro tip:
Try "amplify add api" to create a backend API and then "amplify push" to deploy everything

spawn amplify add auth
Using service: Cognito, provided by: awscloudformation
 
 The current configured provider is Amazon Cognito. 
 
 Do you want to use the default authentication and security configuration? Default configuration
 Warning: you will not be able to edit these selections. 
 How do you want users to be able to sign in? Email
 Do you want to configure advanced settings? No, I am done.
✅ Successfully added auth resource landingd18c2d0a locally

✅ Some next steps:
"amplify push" will build all your local backend resources and provision it in the cloud
"amplify publish" will build all your local backend and frontend resources (if you have hosting category added) and provision it in the cloud

spawn amplify auth update
Please note that certain attributes may not be overwritten if you choose to use defaults settings.
Using service: Cognito, provided by: awscloudformation
 What do you want to do? Walkthrough all the auth configurations
 Select the authentication/authorization services that you want to use: User Sign-Up, Sign-In, connected with AWS IAM controls (Enables per-user 
Storage features for images or other content, Analytics, and more)
 Allow unauthenticated logins? (Provides scoped down permissions that you can control via AWS IAM) No
 Do you want to enable 3rd party authentication providers in your identity pool? No
 Do you want to add User Pool Groups? No
 Do you want to add an admin queries API? No
 Multifactor authentication (MFA) user login options: OFF
 Email based user registration/forgot password: Disabled (Uses SMS/TOTP as an alternative)
 Please specify an SMS verification message: Your verification code is {####}
 Do you want to override the default password policy for this User Pool? No
 Specify the app's refresh token expiration period (in days): 30
 Do you want to specify the user attributes this app can read and write? No
 Do you want to enable any of the following capabilities? 
 Do you want to use an OAuth flow? No
? Do you want to configure Lambda Triggers for Cognito? Yes
? Which triggers do you want to enable for Cognito Pre Sign-up
? What functionality do you want to use for Pre Sign-up Create your own module
Successfully added resource landingd18c2d0aPreSignup locally.

Next steps:
Check out sample function code generated in <project-dir>/amplify/backend/function/landingd18c2d0aPreSignup/src
"amplify function build" builds all of your functions currently in the project
"amplify mock function <functionName>" runs your function locally
To access AWS resources outside of this Amplify app, edit the /home/dtal/repos/www.tracktunes.org/amplify/backend/function/landingd18c2d0aPreSignup/custom-policies.json
"amplify push" builds all of your local backend resources and provisions them in the cloud
"amplify publish" builds all of your local backend and front-end resources (if you added hosting category) and provisions them in the cloud
Successfully added the Lambda function locally
? Do you want to edit your custom function now? No
✅ Successfully updated auth resource landingd18c2d0a locally

✅ Some next steps:
"amplify push" will build all your local backend resources and provision it in the cloud
"amplify publish" will build all your local backend and frontend resources (if you have hosting category added) and provision it in the cloud

✅ Successfully updated resource update locally

✅ Some next steps:
"amplify push" will build all your local backend resources and provision it in the cloud
"amplify publish" will build all your local backend and frontend resources (if you have hosting category added) and provision it in the cloud

spawn amplify push
✔ Successfully pulled backend environment dev from the cloud.

    Current Environment: dev
    
┌──────────┬──────────────────────────┬───────────┬───────────────────┐
│ Category │ Resource name            │ Operation │ Provider plugin   │
├──────────┼──────────────────────────┼───────────┼───────────────────┤
│ Auth     │ landingd18c2d0a          │ Create    │ awscloudformation │
├──────────┼──────────────────────────┼───────────┼───────────────────┤
│ Function │ landingd18c2d0aPreSignup │ Create    │ awscloudformation │
└──────────┴──────────────────────────┴───────────┴───────────────────┘
? Are you sure you want to continue? Yes

Deployment completed.
Deploying root stack landing [ ===========================------------- ] 2/3
	amplify-landing-dev-224751     AWS::CloudFormation::Stack     UPDATE_IN_PROGRESS             Fri Feb 03 2023 22:49:13…     
	functionlandingd18c2d0aPreSig… AWS::CloudFormation::Stack     CREATE_COMPLETE                Fri Feb 03 2023 22:50:06…     
	authlandingd18c2d0a            AWS::CloudFormation::Stack     CREATE_COMPLETE                Fri Feb 03 2023 22:51:35…     
Deployed auth landingd18c2d0a [ ======================================== ] 11/11
	SNSRole                        AWS::IAM::Role                 CREATE_COMPLETE                Fri Feb 03 2023 22:49:42…     
	UserPool                       AWS::Cognito::UserPool         CREATE_COMPLETE                Fri Feb 03 2023 22:49:48…     
	UserPoolClientWeb              AWS::Cognito::UserPoolClient   CREATE_COMPLETE                Fri Feb 03 2023 22:49:53…     
	UserPoolClient                 AWS::Cognito::UserPoolClient   CREATE_COMPLETE                Fri Feb 03 2023 22:49:54…     
	UserPoolClientRole             AWS::IAM::Role                 CREATE_COMPLETE                Fri Feb 03 2023 22:50:11…     
	UserPoolClientLambda           AWS::Lambda::Function          CREATE_COMPLETE                Fri Feb 03 2023 22:50:22…     
	UserPoolClientLambdaPolicy     AWS::IAM::Policy               CREATE_COMPLETE                Fri Feb 03 2023 22:50:39…     
	UserPoolClientLogPolicy        AWS::IAM::Policy               CREATE_COMPLETE                Fri Feb 03 2023 22:50:55…     
	UserPoolClientInputs           Custom::LambdaCallout          CREATE_COMPLETE                Fri Feb 03 2023 22:51:04…     
	IdentityPool                   AWS::Cognito::IdentityPool     CREATE_COMPLETE                Fri Feb 03 2023 22:51:10…     
	IdentityPoolRoleMap            AWS::Cognito::IdentityPoolRol… CREATE_COMPLETE                Fri Feb 03 2023 22:51:15…     
Deployed function landingd18c2d0aPreSignup [ ======================================== ] 3/3
	LambdaExecutionRole            AWS::IAM::Role                 CREATE_COMPLETE                Fri Feb 03 2023 22:49:36…     
	LambdaFunction                 AWS::Lambda::Function          CREATE_COMPLETE                Fri Feb 03 2023 22:49:48…     
	lambdaexecutionpolicy          AWS::IAM::Policy               CREATE_IN_PROGRESS             Fri Feb 03 2023 22:49:49…     




send: spawn id exp4 not open
    while executing
"send -- "n\r""
    (file "/home/dtal/repos/www.tracktunes.org/scripts/amplify_push.exp" line 11)

    Current Environment: dev
    
┌──────────┬──────────────────────────┬───────────┬───────────────────┐
│ Category │ Resource name            │ Operation │ Provider plugin   │
├──────────┼──────────────────────────┼───────────┼───────────────────┤
│ Auth     │ landingd18c2d0a          │ No Change │ awscloudformation │
├──────────┼──────────────────────────┼───────────┼───────────────────┤
│ Function │ landingd18c2d0aPreSignup │ No Change │ awscloudformation │
└──────────┴──────────────────────────┴───────────┴───────────────────┘


Amplify CLI version: 10.7.0
